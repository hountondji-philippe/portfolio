<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="referrer" content="no-referrer">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; connect-src 'self' https: wss:;">
  <meta name="X-Content-Type-Options" content="nosniff">
  <meta name="X-Frame-Options" content="DENY">
  <meta name="X-XSS-Protection" content="1; mode=block">
  
  <!-- Empêcher la mise en cache du code source -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, proxy-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <title>Administration - Portfolio Philippe</title>
  
  <!-- Empêcher la navigation par le site -->
  <script>
    // Empêcher l'historique du navigateur de stocker la page admin
    history.pushState(null, null, location.href);
    window.onpopstate = function() {
      history.go(1);
    };
  </script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/admin-settings-male.png">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <!-- Page de connexion -->
  <div id="loginPage" class="login-container">
    <div class="login-card">
      <div class="login-header">
        <div class="admin-icon">
          <i class="fas fa-shield-halved"></i>
        </div>
        <h1>Administration</h1>
        <p>Accès réservé aux administrateurs</p>
      </div>
      
      <form id="loginForm" class="login-form">
        <div class="form-group">
          <label for="adminEmail">
            <i class="fas fa-envelope"></i>
            Email
          </label>
          <input 
            type="email" 
            id="adminEmail" 
            placeholder="hountondjiphilippe58@gmail.com" 
            required
            autocomplete="email"
            value="hountondjiphilippe58@gmail.com">
        </div>
        
        <div class="form-group">
          <label for="adminPassword">
            <i class="fas fa-lock"></i>
            Mot de passe
          </label>
          <div class="password-input">
            <input 
              type="password" 
              id="adminPassword" 
              placeholder="••••••••" 
              required
              autocomplete="current-password">
            <button type="button" class="toggle-password" aria-label="Afficher le mot de passe">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        
        <div class="form-options">
          <label class="remember-me">
            <input type="checkbox" id="rememberMe">
            <span>Se souvenir de moi</span>
          </label>
        </div>
        
        <button type="submit" class="btn-login">
          <i class="fas fa-sign-in-alt"></i>
          Se connecter
        </button>
        
        <div id="loginError" class="error-message" style="display: none;">
          <i class="fas fa-exclamation-circle"></i>
          <span>Identifiants incorrects</span>
        </div>
      </form>
      
      <div class="login-footer">
        <p><i class="fas fa-info-circle"></i> Connexion sécurisée</p>
      </div>
    </div>
  </div>
  
  <!-- Dashboard principal -->
  <div id="dashboard" class="dashboard hidden">
     <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <i class="fas fa-chart-line"></i>
          <span>Admin Panel</span>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="overview">
          <i class="fas fa-home"></i>
          <span>Vue d'ensemble</span>
        </a>
        <a href="#" class="nav-item" data-page="messages">
          <i class="fas fa-envelope"></i>
          <span>Messages</span>
          <span class="badge" id="messageCount">0</span>
        </a>
        <a href="#" class="nav-item" data-page="analytics">
          <i class="fas fa-chart-bar"></i>
          <span>Statistiques</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <i class="fas fa-cog"></i>
          <span>Paramètres</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <button class="btn-logout" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i>
          <span>Déconnexion</span>
        </button>
      </div>
    </aside>
    
    <!-- Contenu principal -->
    <main class="main-content">
      
      <!-- Header -->
      <header class="dashboard-header">
        <div class="header-left">
          <button class="btn-menu" id="menuToggle">
            <i class="fas fa-bars"></i>
          </button>
          <h2 id="pageTitle">Vue d'ensemble</h2>
        </div>
        
        <div class="header-right">
          <button class="btn-icon" id="refreshBtn" title="Actualiser">
            <i class="fas fa-sync-alt"></i>
          </button>
          
          <div class="notifications">
            <button class="btn-icon" id="notificationsBtn">
              <i class="fas fa-bell"></i>
              <span class="notification-dot"></span>
            </button>
          </div>
          
          <div class="admin-profile">
            <img src="https://ui-avatars.com/api/?name=Admin&background=FF6B35&color=fff" alt="Admin">
            <div class="profile-info">
              <span class="profile-name">Administrateur</span>
              <span class="profile-role">Super Admin</span>
            </div>
          </div>
        </div>
      </header>
      
      <!-- Pages de contenu -->
      
      <!-- Vue d'ensemble -->
      <div id="overviewPage" class="page active">
        <div class="page-content-wrapper">
          
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="stat-content">
                <span class="stat-label">Total Messages</span>
                <span class="stat-value" id="totalMessages">0</span>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <i class="fas fa-envelope-open"></i>
              </div>
              <div class="stat-content">
                <span class="stat-label">Messages lus</span>
                <span class="stat-value" id="readMessages">0</span>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <i class="fas fa-clock"></i>
              </div>
              <div class="stat-content">
                <span class="stat-label">Non lus</span>
                <span class="stat-value" id="unreadMessages">0</span>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                <i class="fas fa-calendar-day"></i>
              </div>
              <div class="stat-content">
                <span class="stat-label">Aujourd'hui</span>
                <span class="stat-value" id="todayMessages">0</span>
              </div>
            </div>
          </div>
          
          <div class="recent-messages">
            <div class="section-header">
              <h3><i class="fas fa-history"></i> Messages récents</h3>
              <a href="#" class="btn-link" data-page="messages">Voir tout</a>
            </div>
            <div id="recentMessagesList" class="messages-preview">
              <!-- Les messages récents seront insérés ici -->
            </div>
          </div>
          
          <div class="quick-actions">
            <h3><i class="fas fa-bolt"></i> Actions rapides</h3>
            <div class="actions-grid">
              <button class="action-card" data-action="export">
                <i class="fas fa-download"></i>
                <span>Exporter les données</span>
              </button>
              <button class="action-card" data-action="delete-all-read">
                <i class="fas fa-trash-alt"></i>
                <span>Supprimer les messages lus</span>
              </button>
              <button class="action-card" data-action="mark-all-read">
                <i class="fas fa-check-double"></i>
                <span>Tout marquer comme lu</span>
              </button>
            </div>
          </div>
          
        </div>
      </div>
      
      <!-- Messages -->
      <div id="messagesPage" class="page">
        <div class="page-content-wrapper">
          
          <div class="messages-toolbar">
            <div class="toolbar-left">
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchMessages" placeholder="Rechercher un message...">
              </div>
            </div>
            
            <div class="toolbar-right">
              <select id="filterMessages" class="filter-select">
                <option value="all">Tous les messages</option>
                <option value="unread">Non lus</option>
                <option value="read">Lus</option>
              </select>
              
              <select id="sortMessages" class="filter-select">
                <option value="newest">Plus récents</option>
                <option value="oldest">Plus anciens</option>
              </select>
            </div>
          </div>
          
          <div id="messagesList" class="messages-list">
            <!-- Les messages seront insérés ici -->
          </div>
          
        </div>
      </div>
      
      <!-- Statistiques -->
      <div id="analyticsPage" class="page">
        <div class="page-content-wrapper">
          
          <div class="analytics-grid">
            <div class="chart-card">
              <h3><i class="fas fa-chart-line"></i> Messages par jour (7 derniers jours)</h3>
              <canvas id="messagesChart"></canvas>
            </div>
            
            <div class="chart-card">
              <h3><i class="fas fa-chart-pie"></i> Répartition des statuts</h3>
              <canvas id="statusChart"></canvas>
            </div>
          </div>
          
          <div class="analytics-info">
            <h3><i class="fas fa-info-circle"></i> Informations détaillées</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Premier message reçu :</span>
                <span class="info-value" id="firstMessageDate">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">Dernier message reçu :</span>
                <span class="info-value" id="lastMessageDate">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">Moyenne par jour :</span>
                <span class="info-value" id="avgMessagesPerDay">-</span>
              </div>
            </div>
          </div>
          
        </div>
      </div>
      
      <!-- Paramètres -->
      <div id="settingsPage" class="page">
        <div class="page-content-wrapper">
          
          <div class="settings-section">
            <h3><i class="fas fa-user-shield"></i> Compte administrateur</h3>
            <form id="changePasswordForm" class="settings-form">
              <div class="form-group">
                <label for="currentPassword">Mot de passe actuel</label>
                <input type="password" id="currentPassword" placeholder="••••••••">
              </div>
              
              <div class="form-group">
                <label for="newPassword">Nouveau mot de passe</label>
                <input type="password" id="newPassword" placeholder="••••••••">
              </div>
              
              <div class="form-group">
                <label for="confirmPassword">Confirmer le mot de passe</label>
                <input type="password" id="confirmPassword" placeholder="••••••••">
              </div>
              
              <button type="submit" class="btn-primary">
                <i class="fas fa-save"></i>
                Modifier le mot de passe
              </button>
            </form>
          </div>
          
          <div class="settings-section">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <div class="settings-options">
              <label class="switch-option">
                <input type="checkbox" id="emailNotifications" checked>
                <span>Recevoir des notifications par email</span>
              </label>
              
              <label class="switch-option">
                <input type="checkbox" id="soundNotifications" checked>
                <span>Activer les sons de notification</span>
              </label>
            </div>
          </div>
          
          <div class="settings-section danger-zone">
            <h3><i class="fas fa-exclamation-triangle"></i> Zone dangereuse</h3>
            <p>Les actions suivantes sont irréversibles. Procédez avec prudence.</p>
            <button class="btn-danger" id="deleteAllMessages">
              <i class="fas fa-trash-alt"></i>
              Supprimer tous les messages
            </button>
          </div>
          
        </div>
      </div>
      
    </main>
  </div>
  
  <!-- Modal de détail du message -->
  <div id="messageModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-envelope-open-text"></i> Détails du message</h3>
        <button class="modal-close">&times;</button>
      </div>
      
      <div class="modal-body" id="modalBody">
        <!-- Le contenu sera inséré dynamiquement -->
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary" id="closeModal">Fermer</button>
        <button class="btn-danger" id="deleteMessage">
          <i class="fas fa-trash"></i>
          Supprimer
        </button>
      </div>
    </div>
  </div>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <!-- Votre script -->
  <script src="script.js"></script>
</body>
</html>